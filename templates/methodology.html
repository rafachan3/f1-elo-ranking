{% extends "base.html" %}

{% block content %}
<div class="container py-5">
    <h1 class="mb-4">Methodology</h1>
    
    <section class="mb-5">
        <h2 class="h3 mb-3">Data Source</h2>
        <div class="card bg-light mb-4">
            <div class="card-header">
                <h4 class="h5 mb-0">Dataset Overview</h4>
            </div>
            <div class="card-body">
                <p>The Formula 1 data used in this analysis is sourced from the <a href="https://www.kaggle.com/datasets/rohanrao/formula-1-world-championship-1950-2020" target="_blank">Formula 1 World Championship (1950-2024)</a> dataset available on Kaggle.</p>
                <div class="row mt-4">
                    <div class="col-md-6">
                        <div class="card h-100">
                            <div class="card-header">
                                <h5 class="h6 mb-0">Race Data</h5>
                            </div>
                            <div class="card-body">
                                <ul class="list-unstyled mb-0">
                                    <li class="mb-2"><i class="fas fa-flag-checkered me-2"></i>Race results (1950-2024)</li>
                                    <li class="mb-2"><i class="fas fa-stopwatch me-2"></i>Qualifying session results</li>
                                    <li class="mb-2"><i class="fas fa-times-circle me-2"></i>Detailed DNF reasons</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card h-100">
                            <div class="card-header">
                                <h5 class="h6 mb-0">Supporting Information</h5>
                            </div>
                            <div class="card-body">
                                <ul class="list-unstyled mb-0">
                                    <li class="mb-2"><i class="fas fa-user me-2"></i>Driver biographical information</li>
                                    <li class="mb-2"><i class="fas fa-car me-2"></i>Constructor (team) details</li>
                                    <li class="mb-2"><i class="fas fa-road me-2"></i>Circuit specifications</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="mb-5">
        <h2 class="h3 mb-3">ELO Rating System Overview</h2>
        
        <div class="card bg-light mb-4">
            <div class="card-header">
                <h4 class="h5 mb-0">Origins and Applications</h4>
            </div>
            <div class="card-body">
                <p>The ELO rating system, developed by Arpad Elo, was originally created for chess rankings but has since proven remarkably versatile across various competitive contexts:</p>
                <ul>
                    <li class="mb-2">Chess and other board games (FIDE World Rankings)</li>
                    <li class="mb-2">Video games (competitive matchmaking systems)</li>
                    <li class="mb-2">Sports analytics (football, basketball)</li>
                    <li class="mb-2">Academic performance assessment</li>
                </ul>
                <p>The system's brilliance lies in its ability to create meaningful comparisons through transitive relationships. For example, in chess, if Player A beats Player B, and Player B beats Player C, the system can infer relative skill levels even if A and C never play each other directly.</p>
            </div>
        </div>

        <div class="card bg-light mb-4">
            <div class="card-header">
                <h4 class="h5 mb-0">Project Inspiration</h4>
            </div>
            <div class="card-body">
                <p>This project was inspired by the comprehensive analysis presented in "<a href="https://www.youtube.com/watch?v=U16a8tdrbII&t=933s&ab_channel=MrV%27sGarage" target="_blank">I watched EVERY SEASON of F1 and worked out the GOAT is _____</a>" by Mr V's Garage. The video demonstrated how systematic analysis of historical F1 data could reveal insights about driver performance across eras.</p>
                
                <p>Building upon this concept, this project aims to:</p>
                <ul class="mb-0">
                    <li class="mb-2">Create an objective, data-driven rating system</li>
                    <li class="mb-2">Account for historical context and era differences</li>
                    <li class="mb-2">Provide transparent methodology and results</li>
                    <li class="mb-2">Make findings accessible through interactive visualization</li>
                </ul>
            </div>
        </div>

        <div class="card bg-light">
            <div class="card-header">
                <h4 class="h5 mb-0">Key Implementation Principles</h4>
            </div>
            <div class="card-body">
                <h5 class="h6 mb-3">Core Challenges in F1 Analysis:</h5>
                <ul class="mb-4">
                    <li class="mb-2">Car performance significantly influences results</li>
                    <li class="mb-2">Multiple competitors in each event</li>
                    <li class="mb-2">Technical failures affect outcomes</li>
                    <li class="mb-2">Varying track characteristics</li>
                    <li class="mb-2">Different era characteristics (reliability, season length, data quality)</li>
                </ul>

                <p class="mb-3">Our implementation addresses these challenges through several key principles:</p>

                <ul class="mb-0">
                    <li class="mb-4">
                        <strong>Teammate Comparisons:</strong> Since teammates drive extremely similar cars in terms of their fundamental design, comparing their performances offers a reliable method to evaluate driver skill while minimizing the impact of car performance differences. Their performance differences therefore reflect driving ability more accurately than comparing drivers across different teams.
                    </li>
                    <li class="mb-4">
                        <strong>Cross-Team Comparisons:</strong> When drivers switch teams, they create a network of indirect comparisons. For example, if Driver A beats teammate B, and B later beats C at another team, we can infer relative performance between A and C. This network effect allows the system to build a comprehensive ranking across the entire grid.
                    </li>
                    <li class="mb-4">
                        <strong>Dynamic Learning Rates:</strong> The K-factor system adapts based on:
                        <ul>
                            <li>Driver experience level (higher for rookies, lower for veterans)</li>
                            <li>Season length (normalized across different eras)</li>
                            <li>Historical era (adjusted for data reliability)</li>
                        </ul>
                    </li>
                    <li class="mb-4">
                        <strong>Reliability Handling:</strong> The system accounts for:
                        <ul>
                            <li>Technical DNFs (excluded from comparison)</li>
                            <li>Driver-caused DNFs (counted as losses)</li>
                            <li>Era-specific withdrawal rules (pre/post 1970)</li>
                            <li>Shortened races (50% weight)</li>
                        </ul>
                    </li>
                    <li class="mb-4">
                        <strong>Historical Context:</strong> Results are weighted differently to account for:
                        <ul>
                            <li>Reliability differences across eras</li>
                            <li>Frequency of races per season</li>
                            <li>Quality of available performance data</li>
                            <li>Different career patterns and longevity</li>
                        </ul>
                    </li>
                    <li class="mb-0">
                        <strong>Confidence Metrics:</strong> Rating reliability is assessed through:
                        <ul>
                            <li>Career length and sample size</li>
                            <li>Performance consistency</li>
                            <li>Rating volatility</li>
                            <li>Era-specific considerations</li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </section>

<section class="mb-5">
        <h2 class="h3 mb-3">Core ELO Calculation</h2>
        
        <div class="formula-steps">
            <!-- Step 1: Base Rating -->
            <div class="card bg-light mb-4">
                <div class="card-header header-main">
                    <h4 class="h5 mb-0">1. Base Rating</h4>
                </div>
                <div class="card-body">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <div class="formula-display text-center py-3">
                                \[R_{initial} = 1500\]
                            </div>
                        </div>
                        <div class="col-md-6">
                            <p class="mb-0">All drivers start with a base rating of 1500 points. This value:</p>
                            <ul class="mb-0 mt-2">
                                <li>Serves as the average skill level</li>
                                <li>Provides numerical stability</li>
                                <li>Follows traditional ELO standards</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 2: Expected Score -->
            <div class="card bg-light mb-4">
                <div class="card-header bg-primary text-white">
                    <h4 class="h5 mb-0">2. Expected Score Calculation</h4>
                </div>
                <div class="card-body">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <div class="formula-display text-center py-3">
                                \[E_A = \frac{1}{1 + 10^{(R_B - R_A)/400}}\]
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="variables-list">
                                <ul class="list-unstyled mb-0">
                                    <li class="mb-2">
                                        \(E_A\): Expected score for Driver A
                                    </li>
                                    <li class="mb-2">
                                        \(R_A\): Current rating of Driver A
                                    </li>
                                    <li class="mb-2">
                                        \(R_B\): Current rating of Driver B
                                    </li>
                                    <li class="mb-2">
                                        \(400\): Scaling factor for 90% win probability
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 3: K-Factor -->
            <div class="card bg-light mb-4">
                <div class="card-header bg-primary text-white">
                    <h4 class="h5 mb-0">3. K-Factor Calculation</h4>
                </div>
                <div class="card-body">
                    <p class="mb-4">The K-factor determines rating change magnitude and varies based on driver experience:</p>
                    
                    <div class="experience-phases">
                        <!-- Rookie Phase -->
                        <div class="phase-card mb-3">
                            <div class="card">
                                <div class="card-header header-step">
                                    Rookie Phase (0-10 races)
                                </div>
                                <div class="card-body">
                                    <div class="row align-items-center">
                                        <div class="col-md-6">
                                            <div class="formula-display text-center">
                                                \[K_{rookie} = K_{max} \cdot 1.0\]
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <p class="mb-0">Maximum learning rate applied</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Learning Phase -->
                        <div class="phase-card mb-3">
                            <div class="card">
                                <div class="card-header bg-warning">
                                    Learning Phase (10-25 races)
                                </div>
                                <div class="card-body">
                                    <div class="row align-items-center">
                                        <div class="col-md-6">
                                            <div class="formula-display text-center">
                                                \[progress = \frac{races - 10}{15}\]
                                                \[K_{learning} = K_{max} \cdot (1.0 - 0.6 \cdot progress)\]
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <p class="mb-0">Gradually decreasing learning rate</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Experience Phase -->
                        <div class="phase-card mb-3">
                            <div class="card">
                                <div class="card-header bg-success text-white">
                                    Experience Phase (25-50 races)
                                </div>
                                <div class="card-body">
                                    <div class="row align-items-center">
                                        <div class="col-md-6">
                                            <div class="formula-display text-center">
                                                \[progress = \min(1.0, \frac{races - 25}{25})\]
                                                \[K_{experienced} = K_{max} \cdot (0.4 - 0.2 \cdot progress)\]
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <p class="mb-0">Stabilized learning rate for experienced drivers</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Final K-Factor Combination -->
                    <div class="card bg-light mt-4">
                        <div class="card-header">
                            Final K-Factor Calculation
                        </div>
                        <div class="card-body">
                            <div class="row align-items-center">
                                <div class="col-md-6">
                                    <div class="formula-display text-center">
                                        \[K_{final} = K_{phase} \cdot F_{era} \cdot F_{season}\]
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="variables-list">
                                        <ul class="list-unstyled mb-0">
                                            <li class="mb-2">
                                                \(K_{phase}\): Experience phase factor
                                            </li>
                                            <li class="mb-2">
                                                \(F_{era}\): Historical era adjustment
                                            </li>
                                            <li class="mb-2">
                                                \(F_{season}\): Season length normalization
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 4: Rating Update -->
            <div class="card bg-light mb-4">
                <div class="card-header bg-primary text-white">
                    <h4 class="h5 mb-0">4. Rating Update Formula</h4>
                </div>
                <div class="card-body">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <div class="formula-display text-center py-3">
                                \[R_{new} = R_{old} + K(S_{actual} - E_{expected})\]
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="variables-list">
                                <ul class="list-unstyled mb-0">
                                    <li class="mb-2">
                                        \(K_{new}\): Updated rating
                                    </li>
                                    <li class="mb-2">
                                        \(K_{old}\)</code>: Previous rating
                                    </li>
                                    <li class="mb-2">
                                        \(K\): Calculated K-factor
                                    </li>
                                    <li class="mb-2">
                                        \(S_{actual}\): Actual score (1 for win, 0 for loss)
                                    </li>
                                    <li class="mb-2">
                                        \(E_{expected}\): Expected score
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="mb-5">
        <h2 class="h3 mb-3">Confidence Metrics</h2>
        
        <div class="formula-steps">
            <!-- Rating Volatility -->
            <div class="card bg-light mb-4">
                <div class="card-header bg-primary text-white">
                    <h4 class="h5 mb-0">1. Rating Volatility</h4>
                </div>
                <div class="card-body">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <div class="formula-display text-center py-3">
                                \[\sigma = \sqrt{\frac{\sum_{i=1}^{n}(R_i - \bar{R})^2}{n-1}}\]
                            </div>
                        </div>
                        <div class="col-md-6">
                            <p class="mb-2">Standard deviation of a driver's rating history:</p>
                            <div class="variables-list">
                                <ul class="list-unstyled mb-0">
                                    <li class="mb-2">
                                        \(\sigma\): Rating volatility
                                    </li>
                                    <li class="mb-2">
                                        \(R_i\): Individual rating in history
                                    </li>
                                    <li class="mb-2">
                                        \(\bar{R}\): Mean rating
                                    </li>
                                    <li class="mb-2">
                                        \(n\): Number of ratings
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Confidence Interval -->
            <div class="card bg-light mb-4">
                <div class="card-header bg-primary text-white">
                    <h4 class="h5 mb-0">2. Confidence Interval Calculation</h4>
                </div>
                <div class="card-body">
                    <div class="calculation-steps">
                        <!-- Base Standard Error -->
                        <div class="step-card mb-3">
                            <div class="card">
                                <div class="card-header header-step">
                                    Base Standard Error
                                </div>
                                <div class="card-body">
                                    <div class="row align-items-center">
                                        <div class="col-md-6">
                                            <div class="formula-display text-center">
                                                \[SE_{base} = \frac{200}{\sqrt{max(1, RaceCount)}}\]
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <p class="mb-0">Initial uncertainty based on number of races</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Adjusted Standard Error -->
                        <div class="step-card mb-3">
                            <div class="card">
                                <div class="card-header header-step">
                                    Adjusted Standard Error
                                </div>
                                <div class="card-body">
                                    <div class="row align-items-center">
                                        <div class="col-md-6">
                                            <div class="formula-display text-center">
                                                \[SE_{adjusted} = SE_{base} \cdot (1 + \frac{\sigma}{100}) \cdot (1 + \frac{CareerSpan}{50})\]
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="variables-list">
                                                <ul class="list-unstyled mb-0">
                                                    <li class="mb-2">
                                                        \(\sigma\): Rating volatility
                                                    </li>
                                                    <li class="mb-2">
                                                        \(CareerSpan\): Driver's F1 career length in years
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Final Confidence Interval -->
                        <div class="step-card mb-3">
                            <div class="card">
                                <div class="card-header header-step">
                                    95% Confidence Interval
                                </div>
                                <div class="card-body">
                                    <div class="row align-items-center">
                                        <div class="col-md-6">
                                            <div class="formula-display text-center">
                                                \[CI = Rating \pm (1.96 \cdot SE_{adjusted})\]
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <p class="mb-2">Represents the range where:</p>
                                            <ul class="mb-0">
                                                <li>95% confidence in true rating</li>
                                                <li>1.96 is the z-score for 95% level</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Confidence Score -->
            <div class="card bg-light mb-4">
                <div class="card-header bg-primary text-white">
                    <h4 class="h5 mb-0">3. Confidence Score Calculation</h4>
                </div>
                <div class="card-body">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <div class="formula-display text-center py-3">
                                \[Score = 100 \cdot \frac{Width_{max} - Width_{current}}{Width_{max} - Width_{min}}\]
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="variables-list">
                                <ul class="list-unstyled mb-0">
                                    <li class="mb-2">
                                        \(Widht_{current}\): Driver's CI width
                                    </li>
                                    <li class="mb-2">
                                        \(Widht_{maxt}\): Largest CI width
                                    </li>
                                    <li class="mb-2">
                                        \(Widht_{min}\):: Smallest CI width
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reliability Grade Scale -->
            <div class="card bg-light">
                <div class="card-header bg-primary text-white">
                    <h4 class="h5 mb-0">4. Reliability Grade Scale</h4>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-bordered mb-0">
                            <thead class="table-light">
                                <tr>
                                    <th width="10%">Grade</th>
                                    <th width="20%"> Confidence Score Range</th>
                                    <th>Interpretation</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><span class="badge reliability-grade grade-a-plus">A+</span></td>
                                    <td>90-100</td>
                                    <td>Extremely reliable: Large sample size, consistent performance</td>
                                </tr>
                                <tr>
                                    <td><span class="badge reliability-grade grade-a">A</span></td>
                                    <td>80-89</td>
                                    <td>Very reliable: Substantial data, stable performance</td>
                                </tr>
                                <tr>
                                    <td><span class="badge reliability-grade grade-b-plus">B+</span></td>
                                    <td>70-79</td>
                                    <td>Reliable: Good sample size, relatively consistent</td>
                                </tr>
                                <tr>
                                    <td><span class="badge reliability-grade grade-b">B</span></td>
                                    <td>60-69</td>
                                    <td>Moderately reliable: Decent sample size</td>
                                </tr>
                                <tr>
                                    <td><span class="badge reliability-grade grade-c-plus">C+</span></td>
                                    <td>50-59</td>
                                    <td>Somewhat reliable: Limited but meaningful data</td>
                                </tr>
                                <tr>
                                    <td><span class="badge reliability-grade grade-c">C</span></td>
                                    <td>40-49</td>
                                    <td>Limited reliability: Small sample size or high volatility</td>
                                </tr>
                                <tr>
                                    <td><span class="badge reliability-grade grade-d-plus">D+</span></td>
                                    <td>30-39</td>
                                    <td>Questionable reliability: Very small sample or extreme volatility</td>
                                </tr>
                                <tr>
                                    <td><span class="badge reliability-grade grade-d">D</span></td>
                                    <td>20-29</td>
                                    <td>Very questionable reliability: Minimal data points</td>
                                </tr>
                                <tr>
                                    <td><span class="badge reliability-grade grade-f">F</span></td>
                                    <td>0-19</td>
                                    <td>Highly unreliable: Insufficient data for meaningful rating</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="mb-5">
        <h2 class="h3 mb-3">Driver Classification System</h2>
        
        <h4 class="h5 mt-4 mb-3">Overview</h4>
        <p>The driver classification system is designed to accurately reflect a driver's experience level while accounting for the significant historical changes in Formula 1. The sport has evolved dramatically over its history, particularly in terms of season length and career duration. To address this, there is a dual-era classification system that applies different thresholds based on when a driver competed.</p>
    
        <h4 class="h5 mt-4 mb-3">Historical Context</h4>
        <div class="row">
            <div class="col-md-6">
                <div class="card bg-light mb-3">
                    <div class="card-header">Pre-1980 Era</div>
                    <div class="card-body">
                        <ul class="mb-0">
                            <li>Shorter seasons (typically 7-11 races per year)</li>
                            <li>Higher safety risks leading to shorter careers</li>
                            <li>Common practice of participating in multiple racing series</li>
                            <li>Less specialized preparation and testing</li>
                            <li>Limited practice sessions and qualifying runs</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card bg-light mb-3">
                    <div class="card-header">Modern Era (1980-Present)</div>
                    <div class="card-body">
                        <ul class="mb-0">
                            <li>Extended seasons (20+ races per year)</li>
                            <li>Improved safety standards enabling longer careers</li>
                            <li>Increased specialization and focus on F1</li>
                            <li>Extensive testing and practice opportunities</li>
                            <li>Complex qualifying formats and race weekends</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    
        <h4 class="h5 mt-4 mb-3">Classification Levels</h4>
        <div class="row">
            <div class="col-md-6">
                <div class="card bg-light mb-3">
                    <div class="card-header">Pre-1980 Era Thresholds</div>
                    <div class="card-body">
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">
                                <span class="badge bg-info text-dark">Rookie</span>
                                <small class="d-block text-muted">0-10 races</small>
                                Initial entry period and learning phase
                            </li>
                            <li class="list-group-item">
                                <span class="badge bg-warning text-dark">Intermediate</span>
                                <small class="d-block text-muted">11-25 races</small>
                                Developing consistency and race craft
                            </li>
                            <li class="list-group-item">
                                <span class="badge bg-success">Experienced</span>
                                <small class="d-block text-muted">26-40 races</small>
                                Demonstrated competency and consistent performance
                            </li>
                            <li class="list-group-item">
                                <span class="badge bg-primary">Veteran</span>
                                <small class="d-block text-muted">41-50 races</small>
                                Proven long-term competitor
                            </li>
                            <li class="list-group-item">
                                <span class="badge bg-danger">Legend</span>
                                <small class="d-block text-muted">50+ races</small>
                                Sustained presence and extensive experience
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card bg-light mb-3">
                    <div class="card-header">Modern Era Thresholds (1980-Present)</div>
                    <div class="card-body">
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">
                                <span class="badge bg-info text-dark">Rookie</span>
                                <small class="d-block text-muted">0-25 races</small>
                                Equivalent to about one full season
                            </li>
                            <li class="list-group-item">
                                <span class="badge bg-warning text-dark">Intermediate</span>
                                <small class="d-block text-muted">26-75 races</small>
                                Multiple seasons of experience
                            </li>
                            <li class="list-group-item">
                                <span class="badge bg-success">Experienced</span>
                                <small class="d-block text-muted">76-150 races</small>
                                Comprehensive understanding and proven race craft
                            </li>
                            <li class="list-group-item">
                                <span class="badge bg-primary">Veteran</span>
                                <small class="d-block text-muted">151-250 races</small>
                                Long-term competitor across multiple eras
                            </li>
                            <li class="list-group-item">
                                <span class="badge bg-danger">Legend</span>
                                <small class="d-block text-muted">250+ races</small>
                                Exceptional longevity and mastery
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    
        <h4 class="h5 mt-4 mb-3">System Justification</h4>
        <div class="card bg-light mb-3">
            <div class="card-body">
                <p>This dual-era classification system provides several key advantages:</p>
                <ol class="mb-0">
                    <li><strong>Historical Accuracy:</strong> Recognizes the different demands and circumstances of each era</li>
                    <li><strong>Fair Comparison:</strong> Allows meaningful comparison of drivers across different periods</li>
                    <li><strong>Career Context:</strong> Accounts for the evolution of season length and career duration</li>
                    <li><strong>Experience Recognition:</strong> Acknowledges both short-term intensity and long-term consistency</li>
                    <li><strong>Era-Appropriate Evaluation:</strong> Reflects the different skill development patterns of each period</li>
                </ol>
            </div>
        </div>
    </section>

    <section class="mb-5">
        <h2 class="h3 mb-3">Special Cases and Data Processing</h2>
        <div class="card bg-light mb-4">
            <div class="card-header">
                <h4 class="h5 mb-0">Race Event Handling</h4>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <div class="card h-100">
                            <div class="card-header">
                                <h5 class="h6 mb-0">Race Exclusions</h5>
                            </div>
                            <div class="card-body">
                                <div class="d-flex align-items-center mb-3">
                                    <i class="fas fa-ban text-danger me-3 fs-4"></i>
                                    <div>
                                        <strong>Indianapolis 500 (1950s)</strong>
                                        <p class="mb-0 small">Different regulations and non-representative competition</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card h-100">
                            <div class="card-header">
                                <h5 class="h6 mb-0">50% Weight Races</h5>
                            </div>
                            <div class="card-body">
                                <ul class="list-unstyled mb-0">
                                    <li class="mb-2 d-flex align-items-center">
                                        <i class="fas fa-tachometer-alt me-2"></i>
                                        <div>
                                            <strong>1976 Japanese GP</strong>
                                            <small class="d-block text-muted">Shortened race</small>
                                        </div>
                                    </li>
                                    <li class="mb-2 d-flex align-items-center">
                                        <i class="fas fa-cloud-rain me-2"></i>
                                        <div>
                                            <strong>1991 Australian GP</strong>
                                            <small class="d-block text-muted">Rain-shortened</small>
                                        </div>
                                    </li>
                                    <li class="mb-2 d-flex align-items-center">
                                        <i class="fas fa-cloud-rain me-2"></i>
                                        <div>
                                            <strong>2009 Malaysian GP</strong>
                                            <small class="d-block text-muted">Rain-shortened</small>
                                        </div>
                                    </li>
                                    <li class="d-flex align-items-center">
                                        <i class="fas fa-flag me-2"></i>
                                        <div>
                                            <strong>2021 Belgian GP</strong>
                                            <small class="d-block text-muted">Minimal racing laps</small>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card bg-light">
            <div class="card-header">
                <h4 class="h5 mb-0">Race Result Processing</h4>
            </div>
            <div class="card-body">
                <div class="row g-4">
                    <!-- Scope of Analysis -->
                    <div class="col-md-6">
                        <div class="card h-100">
                            <div class="card-header">
                                <h5 class="h6 mb-0">Scope of Analysis</h5>
                            </div>
                            <div class="card-body">
                                <p class="mb-3">Only main race results are processed, excluding:</p>
                                <ul class="list-unstyled mb-0">
                                    <li class="mb-2 d-flex align-items-center">
                                        <i class="fas fa-times me-2 text-danger"></i>
                                        <span>Qualifying sessions</span>
                                    </li>
                                    <li class="mb-2 d-flex align-items-center">
                                        <i class="fas fa-times me-2 text-danger"></i>
                                        <span>Sprint races</span>
                                    </li>
                                    <li class="d-flex align-items-center">
                                        <i class="fas fa-times me-2 text-danger"></i>
                                        <span>Practice sessions</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Non-Start Classifications -->
                    <div class="col-md-6">
                        <div class="card h-100">
                            <div class="card-header">
                                <h5 class="h6 mb-0">Non-Start Classifications</h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-6">
                                        <ul class="list-unstyled mb-0">
                                            <li class="mb-2">
                                                <i class="fas fa-circle-xmark me-2 text-danger"></i>Injury
                                            </li>
                                            <li class="mb-2">
                                                <i class="fas fa-circle-xmark me-2 text-danger"></i>107% Rule
                                            </li>
                                            <li class="mb-2">
                                                <i class="fas fa-circle-xmark me-2 text-danger"></i>Did not qualify
                                            </li>
                                            <li class="mb-2">
                                                <i class="fas fa-circle-xmark me-2 text-danger"></i>Pre-race injury
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-6">
                                        <ul class="list-unstyled mb-0">
                                            <li class="mb-2">
                                                <i class="fas fa-circle-xmark me-2 text-danger"></i>Safety concerns
                                            </li>
                                            <li class="mb-2">
                                                <i class="fas fa-circle-xmark me-2 text-danger"></i>Excluded
                                            </li>
                                            <li class="mb-2">
                                                <i class="fas fa-circle-xmark me-2 text-danger"></i>No pre-qualify
                                            </li>
                                            <li>
                                                <i class="fas fa-circle-xmark me-2 text-danger"></i>Fatal accident
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Penalized Results -->
                    <div class="col-md-6">
                        <div class="card h-100">
                            <div class="card-header">
                                <h5 class="h6 mb-0">Penalized Results</h5>
                            </div>
                            <div class="card-body">
                                <p class="mb-3">Driver-caused DNFs result in automatic loss (0 points):</p>
                                <div class="d-flex flex-column gap-2">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-car-crash me-2 text-warning"></i>
                                        <span>Accident</span>
                                    </div>
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-car-burst me-2 text-warning"></i>
                                        <span>Collision</span>
                                    </div>
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-rotate me-2 text-warning"></i>
                                        <span>Spun off</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Withdrawal Handling -->
                    <div class="col-md-6">
                        <div class="card h-100">
                            <div class="card-header">
                                <h5 class="h6 mb-0">Withdrawal Handling</h5>
                            </div>
                            <div class="card-body">
                                <div class="d-flex flex-column gap-3">
                                    <div>
                                        <h6 class="mb-2">Pre-1970 Era</h6>
                                        <p class="mb-0 small">Counted if driver had grid position</p>
                                    </div>
                                    <div>
                                        <h6 class="mb-2">Post-1970 Era</h6>
                                        <p class="mb-0 small">Counted only if at least one lap completed</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
{% endblock %}